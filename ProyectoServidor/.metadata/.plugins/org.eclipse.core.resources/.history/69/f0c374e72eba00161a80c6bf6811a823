<?xml version="1.0" encoding="UTF-8"?>
<configuration>
	<include resource="org/springframework/boot/logging/logback/base.xml" />

	<!-- Appenders -->
	<timestamp key="bySecond" datePattern="yyyyMMdd'T'HHmmss" />
	<appender name="FILE_APPENDER"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		<!-- Support multiple-JVM writing to the same log file -->
		<prudent>true</prudent>
		
		<!-- use the previously created timestamp to create a uniquely named log 
			file -->
		<file>logs/diario/log-${bySecond}.txt</file>
		<encoder>
			<pattern>%logger{35} - %msg%n</pattern>
		</encoder>
		<append>true</append>

		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<!-- daily rollover -->
			<fileNamePattern>logFile.%d{yyyy-MM-dd}.%i.log</fileNamePattern>

			<!-- keep 30 days' worth of history capped at 3GB total size -->
			<maxFileSize>100MB</maxFileSize> 	<!-- each file should be at most 100MB -->
			<maxHistory>10</maxHistory>			<!-- keep 10 days worth of history -->
			<totalSizeCap>1GB</totalSizeCap>	<!-- but at most 1GB -->

		</rollingPolicy>
	</appender>

	<!-- Loggers -->
	<springProfile name="dev">
		<logger name="es.crimarde.core.controller.Controller" level="WARN"
			additivity="false">
			<appender-ref ref="CONSOLE" /> 	<!-- Configurado por spring -->
			<appender-ref ref="FILE" />		<!-- Configurado por spring -->
			<appender-ref ref="FILE_APPENDER" />
		</logger>
	</springProfile>

	<springProfile name="production">
		<logger name="es.crimarde.springframework.helpers" level="WARN"
			additivity="false">
			<appender-ref ref="CONSOLE" />
			<appender-ref ref="FILE" />
		</logger>
	</springProfile>



</configuration>
