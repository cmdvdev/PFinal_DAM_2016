package es.crimarde.helpers;

import es.crimarde.model.Book;
import es.crimarde.negocio.BookDTO;
import ma.glasnost.orika.MapperFacade;
import ma.glasnost.orika.MapperFactory;
import ma.glasnost.orika.converter.ConverterFactory;
import ma.glasnost.orika.impl.DefaultMapperFactory;

public class OrikaMapper {

	private static final MapperFactory mapperFactory;

	static {
		mapperFactory = new DefaultMapperFactory.Builder().build();

		ConverterFactory converterFactory = mapperFactory.getConverterFactory();
		converterFactory.registerConverter(new LocalDateTimeToLocalDateConverter());

		mapperFactory.classMap(Book.class, BookDTO.class).exclude("id").field("userSurname", "surname")
				.field("entityType.id", "type").field("creationDateTime", "creationDate").field("nums[0]", "firstNum")
				.byDefault().register();
	}

	private OrikaConfig() {
	    }

	public static MapperFacade getMapperFacade() {
		return mapperFactory.getMapperFacade();
	}
}
