<?xml version="1.0" encoding="UTF-8"?>
<configuration>
	<include resource="org/springframework/boot/logging/logback/base.xml" />

	<!-- Appenders -->
	<timestamp key="bySecond" datePattern="yyyyMMdd'T'HHmmss" />
	
	<appender name="ROLLING_APPENDER"
		class="ch.qos.logback.core.rolling.RollingFileAppender">
		
		<!-- Support multiple-JVM writing to the same log file -->
		<prudent>true</prudent>
		
		<!-- use the previously created timestamp to create a uniquely named log file -->
		<!-- <file>logs/diario/log-${bySecond}.txt</file> -->
		
		<encoder>
			<Pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{35} - %msg %n</Pattern>
		</encoder> 
		
		<append>true</append>

		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
			<!-- daily rollover -->
			<fileNamePattern>logs/diario/logFile.%d{yyyy-MM-dd}.log</fileNamePattern>

			<!-- keep 30 days' worth of history capped at 3GB total size -->
			<maxHistory>10</maxHistory>			<!-- keep 10 days worth of history -->
			<totalSizeCap>1GB</totalSizeCap>	<!-- but at most 1GB -->

		</rollingPolicy>
	</appender>
	
	<appender name="minuteRollingFileAppender" class="ch.qos.logback.core.rolling.RollingFileAppender">
		<rollingPolicy class="ch.qos.logback.core.rolling.TimeBasedRollingPolicy">
		    <!-- rollover every minute -->
			<FileNamePattern>logs/diario/rest-minute.%d{yyyy-MM-dd_HH-mm}.log</FileNamePattern>
			
			<!-- keep 1 day worth of history -->
			<maxHistory>1</maxHistory>			
		</rollingPolicy>
 
		<encoder>
			<Pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{35} - %msg %n</Pattern>
		</encoder> 	    
  	</appender>

	<!-- Loggers -->
	<springProfile name="dev">
		<logger name="es.crimarde.core.controller.Controller" level="WARN"
			additivity="false">
			<appender-ref ref="CONSOLE" /> 	<!-- Configurado por spring -->
			<appender-ref ref="FILE" />		<!-- Configurado por spring -->
			<appender-ref ref="ROLLING_APPENDER" />
		</logger>
	</springProfile>

	<springProfile name="production">
		<logger name="es.crimarde.springframework.helpers" level="WARN"
			additivity="false">
			<appender-ref ref="CONSOLE" />
			<appender-ref ref="FILE" />
		</logger>
	</springProfile>



</configuration>
